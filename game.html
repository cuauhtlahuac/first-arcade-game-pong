<html>
  <canvas id="gameCanvas" width="800" height="600"> </canvas>
  <script>
    var canvas;
    var canvasContext;
    var ballX = 50;
    var ballY = 50;
    var ballSpeedX = 15;
    var ballSpeedY = 4;

    var paddleLeftY = 250;
    const PADDLE_HEIGHT = 100;
    // will call this function every time the mouse moves
    function calculateMousePos(evt) {
      // every time the function is call it recive the event '(evt)'

      // This get the black rectangle area
      var rect = canvas.getBoundingClientRect();
      var root = document.documentElement;
      console.log({ root });

      // the lines below return the muose position, in x and y axis.
      var mouseX = evt.clientX - rect.left - root.scrollLeft;
      var mouseY = evt.clientY - rect.top - root.scrollTop;
      return {
        x: mouseX,
        y: mouseY
      };
    }

    window.onload = function() {
      canvas = document.getElementById("gameCanvas");
      canvasContext = canvas.getContext("2d");
      framesPerSecond = 30;
      setInterval(() => {
        callBoth();
      }, 1000 / framesPerSecond);

      canvas.addEventListener("mousemove", evt => {
        var mousePos = calculateMousePos(evt);
        paddleLeftY = mousePos.y - PADDLE_HEIGHT / 2;
      });
    };
    function callBoth() {
      moveEveryThing();
      drawEveryThing();
    }
    function moveEveryThing() {
      ballX = ballX + ballSpeedX;
      // console.log({ ballX });
      if (ballX > canvas.width || ballX < 0) {
        //The javascript multiply the var number like
        // -(5) or -(-5)
        ballSpeedX = -ballSpeedX;
      }
      ballY = ballY + ballSpeedY;
      // console.log({ ballY });
      if (ballY > canvas.height || ballY < 0) {
        //The javascript multiply the var number like
        // -(5) or -(-5)
        ballSpeedY = -ballSpeedY;
      }
    }
    function rectangle(leftX, topX, width, height, color) {
      canvasContext.fillStyle = color;
      //(XInitPos,YInitPos,width eje x, higth eje y)
      canvasContext.fillRect(leftX, topX, width, height);
    }
    function circle(centerX, centerY, size, color) {
      canvasContext.fillStyle = color;
      canvasContext.beginPath();
      canvasContext.arc(centerX, centerY, size, 0, Math.PI * 2, true);
      canvasContext.fill();
    }

    function drawEveryThing() {
      // next line blanks out the screen with black
      rectangle(0, 0, canvas.width, canvas.height, "black");
      // this is left draws red square
      rectangle(ballX, 20, 10, 10, "red");
      // this is left player paddle
      // here gonna use the new mouse event paddle pos
      rectangle(0, paddleLeftY, 10, PADDLE_HEIGHT, "white");
      // draw circle
      circle(ballX, ballY, 10, "white");
    }
  </script>
</html>
